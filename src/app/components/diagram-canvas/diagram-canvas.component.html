<div class="diagram-canvas-container">
  <div class="left-toolbar" role="toolbar" aria-label="Diagram toolbar" data-testid="left-toolbar">
    <!-- Interaction Tools Section -->
    <div class="toolbar-section">
      <app-toolbar></app-toolbar>
    </div>

    <!-- Shapes Section -->
    <div class="toolbar-section">
      <!-- Shapes Grid -->
      <div class="shapes-container">
        <div class="shapes-grid">
          @for (shape of allShapes; track getShapeType(shape)) {
          <div
            class="shape-item"
            [class.hovered]="isShapeHovered(getShapeType(shape))"
            [attr.data-shape-type]="getShapeType(shape)"
            (mouseenter)="onShapeHover(getShapeType(shape))"
            (mouseleave)="onShapeHoverEnd()"
            (click)="onShapeClick(shape)"
            [title]="shape.description"
          >
            <div class="shape-preview">
              <div class="shape-icon" [ngClass]="getShapeIconClass(shape)"></div>
            </div>
            <div class="shape-info">
              <span class="shape-name">{{ shape.name }}</span>
            </div>
          </div>
          }
        </div>
      </div>
    </div>

    <!-- Tools Section -->
    <div class="toolbar-section">
      <div class="section-header">
        <h3 class="section-title">Canvas Tools</h3>
      </div>

      <!-- Clear Button -->
      <div class="tool-group">
        <button class="btn btn-danger" (click)="onClearDiagram()">
          <svg
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <polyline points="3,6 5,6 21,6"></polyline>
            <path
              d="m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"
            ></path>
            <line x1="10" y1="11" x2="10" y2="17"></line>
            <line x1="14" y1="11" x2="14" y2="17"></line>
          </svg>
          Clear Canvas
        </button>
      </div>

      <!-- Zoom Controls -->
      <div class="tool-group">
        <div class="tool-group-header">
          <span class="tool-group-title">Zoom</span>
        </div>
        <div class="zoom-controls">
          <button
            class="btn btn-icon zoom-btn"
            (click)="onZoomOut()"
            data-testid="btn-zoom-out"
            [attr.aria-label]="'Zoom out at cursor position'"
            title="Zoom out at cursor position"
          >
            <svg
              width="14"
              height="14"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="11" cy="11" r="8"></circle>
              <line x1="8" y1="11" x2="14" y2="11"></line>
            </svg>
          </button>
          <span class="zoom-display">{{ currentZoom * 100 | number : '1.0-0' }}%</span>
          <button
            class="btn btn-icon zoom-btn"
            (click)="onZoomIn()"
            data-testid="btn-zoom-in"
            [attr.aria-label]="'Zoom in at cursor position'"
            title="Zoom in at cursor position"
          >
            <svg
              width="14"
              height="14"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="11" cy="11" r="8"></circle>
              <line x1="11" y1="8" x2="11" y2="14"></line>
              <line x1="8" y1="11" x2="14" y2="11"></line>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>

  <div #diagramContainer class="diagram-container"></div>
</div>
